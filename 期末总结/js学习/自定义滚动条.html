<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
    <title>1111</title>
<style>
    #parent {width:600px; height:20px; background:#CCC; position:relative; margin:10px auto;}
    #div1 {width:20px;height:20px; background:red; position:absolute;left:0;top:0;}
    #div2 {width:300px; height:300px; height:300px; border:1px solid black; overflow:hidden; position:relative;}
    #div3 {position:absolute; left:0; top:0;}
</style>
    <script>
        window.onload=function ()
        {
            var oDiv=document.getElementById('div1');
            var oDiv2=document.getElementById('div2');
            var oDiv3=document.getElementById('div3');
            var oParent=document.getElementById('parent');

            var disX=0;//距离


            oDiv.onmousedown=function (ev) {
                var oEvent=ev||event;

                disX=oEvent.clientX-oDiv.offsetLeft;//鼠标减DIV的位置

                document.onmousemove=function (ev) {
                    var oEvent = ev || event;
                    var l = oEvent.clientX - disX;

                    if(l<0)
                    {
                        l=0;
                    }
                    else if(l>oParent.offsetWidth-oDiv.offsetWidth)
                    {
                        l=oParent.offsetWidth-oDiv.offsetWidth;
                    }

                    oDiv.style.left = l + 'px';

                    var scale=l/(oParent.offsetWidth-oDiv.offsetWidth);
                    document.title=scale;

                    oDiv3.style.top=-scale*(oDiv3.offsetHeight-oDiv2.offsetHeight
                )+'px';
                };
                document.onmouseup=function ()
                {
                    document.onmousemove=null;
                    document.onmouse=null;

                };
                return false;  //防止火狐BUG
            };
        };
    </script>
<body>
<div id="parent">
    <div id="div1"></div>
</div>
<div id="div2">
    <div id="div3">
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
        2111111111111111111111111111111111111111111111111111
    </div>
</div>
</body>
</html>